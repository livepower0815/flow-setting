(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-38375d7a"],{"0d3e":function(t,e,n){"use strict";n("8d20")},"1cb1":function(t,e,n){},"4b65":function(t,e,n){},"5ddc":function(t,e,n){"use strict";n("d22c")},6031:function(t,e,n){},"8c15":function(t,e,n){"use strict";n("4b65")},"8d20":function(t,e,n){},"9c71":function(t,e,n){"use strict";n("1cb1")},d22c:function(t,e,n){},e091:function(t,e,n){"use strict";n("6031")},ef12:function(t,e,n){"use strict";n.r(e);var o=(n("ac6a"),n("e193")),i=n("b76a"),s=n.n(i),a={left:-1,top:-1},r={name:"NodeMenu",components:{draggable:s.a},data:function(){return{draggableOptions:{preventOnFilter:!1,sort:!1,disabled:!1,ghostClass:"tt",forceFallback:!0},menuList:[{id:"1",type:"verticalOption",name:"拖曳新增節點"}],nodeMenu:{}}},created:function(){this.isFirefox()&&(document.body.ondrop=function(t){a.left=t.layerX,a.top=t.clientY-50,t.preventDefault(),t.stopPropagation()})},methods:{getMenuByType:function(t){for(var e=0;e<this.menuList.length;e++)if(this.menuList[e].type===t)return this.menuList[e]},move:function(t){var e=t.item.attributes.type.nodeValue;this.nodeMenu=this.getMenuByType(e)},end:function(t,e){this.$emit("dropNode",t,this.nodeMenu)},isFirefox:function(){return navigator.userAgent.indexOf("Firefox")>-1}}},d=(n("8c15"),n("2877")),c=Object(d.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"tool",staticClass:"node-menu"},[t._m(0),t._v(" "),n("ul",{staticClass:"node-menu-ul"},[n("draggable",t._b({on:{end:t.end,start:t.move},model:{value:t.menuList,callback:function(e){t.menuList=e},expression:"menuList"}},"draggable",t.draggableOptions,!1),t._l(t.menuList,(function(e){return n("li",{key:e.id,staticClass:"node-menu-li",attrs:{type:e.type}},[t._v("\n        "+t._s(e.name)+"\n        "),n("el-tooltip",{attrs:{effect:"dark",content:"請拖曳新增",placement:"top"}},[n("i",{staticClass:"el-icon-info"})])],1)})),0)],1)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node-menu-left"},[n("div",{staticClass:"node-menu-name"},[t._v("\n      Kerry Flow Setting Demo\n    ")])])}],!1,null,"b8ffecea",null).exports,l=(n("7f7f"),n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat-card",attrs:{id:t.card.id}},[n("div",{staticClass:"chat-card-text"},[t.hasTitleKey?n("div",{staticClass:"chat-card-text__title",attrs:{id:t.card.id+"-title"}},[n("el-input",{class:{"is-error":""===t.card.title.trim()},attrs:{size:"mini",placeholder:"請輸入標題",maxlength:"50"},model:{value:t.card.title,callback:function(e){t.$set(t.card,"title",e)},expression:"card.title"}},[n("template",{slot:"append"},[t._v(t._s(t.card.title.length+"/50"))])],2),t._v(" "),n("BlockTooltip",{attrs:{show:t.showOptionTooltip(t.card.id+"-title"),top:0,left:-40},on:{delete:t.deleteTitle}})],1):t._e(),t._v(" "),t.hasSubtitleKey?n("div",{staticClass:"chat-card-text__subtitle",attrs:{id:t.card.id+"-subtitle"}},[n("el-input",{class:{"is-error":""===t.card.sub_title.trim()},attrs:{size:"mini",placeholder:"請輸入次標題",maxlength:"50"},model:{value:t.card.sub_title,callback:function(e){t.$set(t.card,"sub_title",e)},expression:"card.sub_title"}},[n("template",{slot:"append"},[t._v(t._s(t.card.sub_title.length+"/50"))])],2),t._v(" "),n("BlockTooltip",{attrs:{show:t.showOptionTooltip(t.card.id+"-subtitle"),top:0,left:-40},on:{delete:t.deleteSubTitle}})],1):t._e(),t._v(" "),t.hasContnetKey?n("div",{staticClass:"chat-card-text__content"},[n("el-input",{class:{"is-error":""===t.card.content.trim()},attrs:{size:"mini",placeholder:"請輸入內容",type:"textarea",resize:"none",maxlength:"1000","show-word-limit":"",rows:3},model:{value:t.card.content,callback:function(e){t.$set(t.card,"content",e)},expression:"card.content"}})],1):t._e()]),t._v(" "),t.hasOptionsKey?[t._l(t.card.options,(function(e,o){return n("div",{key:e.id,staticClass:"chat-card-options",attrs:{id:e.id}},[n("el-input",{class:{"is-error":""===e.value.trim()},attrs:{size:"mini",maxlength:"25",placeholder:"請輸入選項內容"},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"option.value"}},[n("template",{slot:"append"},[t._v(t._s(e.value.length+"/25"))])],2),t._v(" "),n("div",{staticClass:"chat-card-options-endpoint",attrs:{id:e.id+"-endpoint","data-type":"cardOption","data-node-id":t.node.id,"data-endpoint-id":e.id+"-endpoint","data-node-index":t.nodeIndex,"data-message-index":t.messageIndex,"data-option-index":o}}),t._v(" "),o>0?n("BlockTooltip",{attrs:{show:t.showOptionTooltip(e.id),top:0,left:-24},on:{delete:function(e){return t.deleteOption(o,t.card)}}}):t._e()],1)})),t._v(" "),n("div",{staticClass:"chat-card-add",on:{click:function(e){return t.addOption(t.card.options)}}},[n("i",{staticClass:"el-icon-plus",staticStyle:{"margin-right":"8px"}}),t._v(" 添加選項按鈕\n    ")])]:t._e(),t._v(" "),t._t("tooltip")],2)}),u={name:"BlockTooltip",props:{show:{type:Boolean},top:{type:[Number,String],default:0},left:{type:[Number,String],default:0}},data:function(){return{}},computed:{computePosition:function(){return{top:this.top+"px",left:this.left+"px"}}},methods:{clickHandler:function(t){switch(t){case"delete":this.$emit("delete")}}}},h=(n("e091"),Object(d.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tooltip",class:{"tooltip-show":t.show},style:t.computePosition},[n("div",{staticClass:"tooltip-delete",on:{click:function(e){return t.clickHandler("delete")}}},[n("i",{staticClass:"el-icon-delete"})])])}),[],!1,null,"14f0f75e",null)).exports,p=(n("db72"),n("6762"),n("2fdb"),n("456d"),n("c50a"));function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=t.id||Object(p.a)(),this.name=t.name||"",this.left=t.left||"0px",this.top=t.top||"0px",this.messages=t.messages||[],this.connect_target=t.connect_target||null,this.connect_flow_id=t.connect_flow_id||null,this.is_ring=t.is_ring||!1,this.is_root=t.is_root||!1}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=t.id||Object(p.a)(),this.type="text",this.text=t.text||""}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=t.id||Object(p.a)(),this.type="card",this.content=t.content||"",this.options=t.options||[new v]}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=t.id||Object(p.a)(),this.connect_target=t.connect_target||null,this.value=t.value||""}var _={name:"ChatCard",components:{BlockTooltip:h},props:{card:{type:Object,required:!0},node:{type:Object,default:function(){return{}}},nodeIndex:{type:[String,Number],required:!0},messageIndex:{type:[String,Number],required:!0}},data:function(){return{isImgLoading:!1}},computed:{jsPlumb:function(){return this.$store.state.flowChart.jsPlumbInstance},hasImagesUrlKey:function(){return this.card.hasOwnProperty("url")},hasTitleKey:function(){return this.card.hasOwnProperty("title")},hasSubtitleKey:function(){return this.card.hasOwnProperty("sub_title")},hasContnetKey:function(){return this.card.hasOwnProperty("content")},hasOptionsKey:function(){return this.card.hasOwnProperty("options")&&this.card.options.length>0}},methods:{showOptionTooltip:function(t){return this.$store.state.flowChart.tooltipId===t},addOption:function(t){var e=new v;t.push(e),this.initOptionPlumb(e)},initOptionPlumb:function(t){var e=this;this.$nextTick((function(){e.jsPlumb.makeSource(t.id+"-endpoint",{endpoint:"Blank",isSource:!0,anchor:"Right",maxConnections:1}),e.$store.dispatch("flowChart/repaintEverything")}))},deleteTitle:function(){this.$delete(this.card,"title"),this.$store.dispatch("flowChart/repaintEverything")},deleteSubTitle:function(){this.$delete(this.card,"sub_title"),this.$store.dispatch("flowChart/repaintEverything")},deleteOption:function(t,e){var n=e.options[t].id;this.jsPlumb.remove(n),e.options.splice(t,1),this.$store.dispatch("flowChart/repaintEverything")}}},b={name:"FlowNode",components:{ChatCard:(n("5ddc"),Object(d.a)(_,l,[],!1,null,"1f24f719",null)).exports,BlockTooltip:h},props:{node:{type:Object,required:!0},nodeIndex:{type:[Number,String],required:!0},flowChartData:{type:Object,required:!0}},data:function(){return{editNodeName:!1,isImgLoading:!1}},computed:{nodeContainerStyle:function(){return{top:this.node.top,left:this.node.left}},showTooltip:function(){return this.$store.state.flowChart.tooltipId===this.node.id},jsPlumb:function(){return this.$store.state.flowChart.jsPlumbInstance},isRing:function(){return this.node.is_ring},isRoot:function(){return this.node.is_root}},methods:{changeNodeSite:function(){this.node.left===this.$refs.node.style.left&&this.node.top===this.$refs.node.style.top||this.$emit("changeNodeSite",{nodeId:this.node.id,left:this.$refs.node.style.left,top:this.$refs.node.style.top})},mousedownHandler:function(t){this.$el.classList.add("over-layout")},mouseleaveHandler:function(t){this.$el.classList.remove("over-layout")},showMessageTooltip:function(t){return this.$store.state.flowChart.tooltipId===t},deleteNode:function(){this.$emit("deleteNode")},deleteMessage:function(t,e,n){e.messages.splice(t,1),"card"===n.type&&this.jsPlumb.remove(n.id),this.$store.dispatch("flowChart/repaintEverything")},handleCommand:function(t,e){var n,o=this;switch(t){case"text":n=new m;break;case"contentOptionCard":n=new g;break;case"ring":e.is_ring=!0,e.connect_target=null,this.jsPlumb.deleteConnectionsForElement(e.id+"-endpoint")}n&&(e.messages.push(n),"contentOptionCard"!==t&&"card"!==t||this.$nextTick((function(){n.options.forEach((function(t){o.jsPlumb.makeSource(t.id+"-endpoint",{endpoint:"Blank",isSource:!0,anchor:"Right",maxConnections:1})}))}))),this.$store.dispatch("flowChart/repaintEverything")},switchNameMode:function(t){var e=this;if(!t&&(""===this.node.name.trim()||this.node.name.length>20))return!1;this.editNodeName=t,t&&this.$nextTick((function(){e.$refs.nodeNameInput.focus()}))},deleteRing:function(){this.node.is_ring=!1,this.$store.dispatch("flowChart/repaintEverything")},deleteFlowRoot:function(){this.node.connect_flow_id=null,this.$store.dispatch("flowChart/repaintEverything")},formatName:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return t.length>e?"".concat(t.slice(0,e),"..."):t}}},w={name:"FlowChartBody",components:{NodeMenu:c,FlowNode:(n("9c71"),Object(d.a)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"node",staticClass:"block",style:t.nodeContainerStyle,attrs:{id:t.node.id,"data-type":"node","data-node-id":t.node.id,"data-node-index":t.nodeIndex},on:{mouseup:t.changeNodeSite,mousedown:t.mousedownHandler,mouseleave:t.mouseleaveHandler}},[t.isRoot?n("div",{staticClass:"block-start"},[t._m(0),t._v(" "),n("div",{staticClass:"block-start-text"},[t._v("開始")])]):t._e(),t._v(" "),n("div",{staticClass:"block-header"},[t.editNodeName?n("input",{directives:[{name:"model",rawName:"v-model",value:t.node.name,expression:"node.name"}],ref:"nodeNameInput",class:{"error-border":""===t.node.name.trim()||t.node.name.length>20},attrs:{type:"text"},domProps:{value:t.node.name},on:{blur:function(e){return t.switchNameMode(!1)},input:function(e){e.target.composing||t.$set(t.node,"name",e.target.value)}}}):n("span",[t._v(t._s(t.formatName(t.node.name)))]),t._v(" "),n("span",{staticClass:"block-header-tool"},[t.editNodeName?t._e():n("i",{staticClass:"el-icon-edit",on:{click:function(e){return t.switchNameMode(!0)}}})])]),t._v(" "),t._l(t.node.messages,(function(e,o){return["text"===e.type?n("div",{key:"text-"+e.id,staticClass:"block-text",class:{"error-border":""===e.text.trim()},attrs:{id:e.id}},[n("el-input",{attrs:{size:"mini",placeholder:"請輸入文字內容",type:"textarea",maxlength:"1000","show-word-limit":"",resize:"none",rows:3},model:{value:e.text,callback:function(n){t.$set(e,"text",n)},expression:"message.text"}}),t._v(" "),n("BlockTooltip",{attrs:{show:t.showMessageTooltip(e.id),top:0,left:-34},on:{delete:function(n){return t.deleteMessage(o,t.node,e)}}})],1):t._e(),t._v(" "),"card"===e.type?n("ChatCard",{key:"chatcard-"+e.id,attrs:{card:e,node:t.node,"node-index":t.nodeIndex,"message-index":o},scopedSlots:t._u([{key:"tooltip",fn:function(){return[n("BlockTooltip",{attrs:{show:t.showMessageTooltip(e.id),top:0,left:-34},on:{delete:function(n){return t.deleteMessage(o,t.node,e)}}})]},proxy:!0}],null,!0)}):t._e()]})),t._v(" "),t.isRing?n("div",{staticClass:"block-action",attrs:{id:t.node.id+"-ring"}},[n("i",{staticClass:"el-icon-service block-action__icon"}),t._v(" "),n("span",{staticClass:"block-action__content"},[t._v("轉接真人客服")]),t._v(" "),n("BlockTooltip",{attrs:{show:t.showMessageTooltip(t.node.id+"-ring"),top:0,left:-34},on:{delete:t.deleteRing}})],1):t._e(),t._v(" "),n("div",{staticClass:"block-add"},[n("el-dropdown",{attrs:{trigger:"click",placement:"top"},on:{command:function(e){return t.handleCommand(e,t.node)}}},[n("span",{staticClass:"block-add__content"},[n("i",{staticClass:"el-icon-plus",staticStyle:{"margin-right":"8px"}}),t._v(" 添加選項\n      ")]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"contentOptionCard"}},[t._v("添加文字 ＋ 選項按鈕")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"text"}},[t._v("添加文字")]),t._v(" "),n("el-dropdown-item",{attrs:{disabled:t.isRing||null!==t.node.connect_flow_id,divided:"",command:"ring"}},[t._v("轉接真人客服")])],1)],1)],1),t._v(" "),n("BlockTooltip",{attrs:{show:t.showTooltip&&!t.isRoot,top:-42,left:132},on:{delete:t.deleteNode}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isRing&&null===t.node.connect_flow_id,expression:"!isRing && node.connect_flow_id === null"}],ref:"nodeEndpoint",staticClass:"block-endpoint",attrs:{id:t.node.id+"-endpoint","data-type":"nodePoint","data-node-id":t.node.id,"data-endpoint-id":t.node.id+"-endpoint","data-node-index":t.nodeIndex}})],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"block-start-icon"},[e("i",{staticClass:"el-icon-right"})])}],!1,null,"4520a8e6",null)).exports},data:function(){return{flowChartData:{flow_id:"FL481WavdeSKj",site_id:"WS3SXyGDtjQmq",flow_name:"新流程",enable:!0,nodes:[{id:"GR481WaxCkGSU",flow_id:"FL481WavdeSKj",is_root:!0,is_ring:!1,name:"根节点123",left:"43.3333px",top:"298.333px",connect_target:"",connect_flow_id:"",messages:[{id:"BL4n2ghQFaiGU",type:"card",content:"請選擇你遇到的問題",options:[{id:"OP4n2ghQFaiGV",value:"入款問題",connect_target:"GR481WiEbTfur"},{id:"OP4n2ghQFwNwu",value:"出款問題",connect_target:"GR4n2ghQEMNTj"},{id:"OP4n2ghQFUim5",value:"信用卡問題",connect_target:"GR4n2ghQEMNTk"}]}]},{id:"GR481WiEbTfuq",flow_id:"FL481WavdeSKj",is_root:!1,is_ring:!0,name:"轉接真人",left:"884px",top:"134px",connect_target:"",connect_flow_id:"",messages:[{id:"BL4n2ghQGDhZf",type:"text",text:"好的了解，接下來幫你轉接真人客服。",options:[]}]},{id:"GR481WiEbTfur",flow_id:"FL481WavdeSKj",is_root:!1,is_ring:!1,name:"入款問題",left:"466px",top:"54.3333px",connect_target:"",connect_flow_id:"",messages:[{id:"BL4n2ghQHohCq",type:"card",content:"入款遇到什麼問題",options:[{id:"OP4n2ghQHKMs1",value:"連線異常",connect_target:"GR481WiEbTfuq"},{id:"OP4n2ghQJ8hgA",value:"款項沒有儲值成功",connect_target:"GR481WiEbTfuq"}]}]},{id:"GR4n2ghQEMNTj",flow_id:"FL481WavdeSKj",is_root:!1,is_ring:!1,name:"出款問題",left:"466px",top:"437.667px",connect_target:"",connect_flow_id:"",messages:[{id:"BL4n2ghQKYLnw",type:"card",content:"出款遇到什麼問題",options:[{id:"OP4n2ghQLmgc7",value:"連線異常2",connect_target:"GR481WiEbTfuq"},{id:"OP4n2ghQLHL1G",value:"沒有到帳",connect_target:"GR481WiEbTfuq"}]}]},{id:"GR4n2ghQEMNTk",flow_id:"FL481WavdeSKj",is_root:!1,is_ring:!1,name:"信用卡問題",left:"467.333px",top:"822px",connect_target:"",connect_flow_id:"",messages:[{id:"BL4n2ghQMsKDS",type:"card",content:"信用卡遇到什麼事情",options:[{id:"OP4n2ghQMQfts",value:"卡片被盜",connect_target:"GR481WiEbTfuq"},{id:"OP4n2ghQNcKi3",value:"卡片遺失",connect_target:"GR481WiEbTfuq"}]}]}]},zoom:1,isLoading:!1,siteSettingData:{avatar_url:"",name:"智能客服"},submitErrorMessage:"",jsplumbSetting:{Anchors:["Right","RightMiddle","Top","TopCenter","TopRight","TopLeft","Bottom","BottomCenter","BottomRight","BottomLeft","Left","LeftMiddle"],Container:"nodeContainer",Connector:["Bezier",{curviness:100}],ConnectionsDetachable:!0,DeleteEndpointsOnDetach:!1,Endpoint:["Blank",{Overlays:""}],LogEnabled:!0,PaintStyle:{stroke:"#aaaaaa",strokeWidth:1,outlineStroke:"transparent",outlineWidth:10},DragOptions:{cursor:"pointer",zIndex:2e3},Overlays:[["Arrow",{width:10,length:8,location:1,direction:1,foldback:.623}]],RenderMode:"svg",HoverPaintStyle:{stroke:"#aed8f3",strokeWidth:3},Scope:"jsPlumb_DefaultScope"},targetAnchors:["TopLeft"]}},computed:{nodeList:function(){return this.$store.state.flowChart.nodeList},jsPlumb:function(){return this.$store.state.flowChart.jsPlumbInstance}},mounted:function(){var t=this,e=o.jsPlumb.getInstance(this.jsplumbSetting);this.$store.commit("flowChart/SET_PLUMB_INSTANCE",e),this.$nextTick((function(){t.jsPlumbInit()})),this.$el.addEventListener("mouseover",this.setHover)},destroyed:function(){this.$store.commit("flowChart/RESET_NODE_LIST"),this.$el.removeEventListener("mouseover",this.setHover)},methods:{jsPlumbInit:function(){var t=this;this.jsPlumb.ready((function(){t.jsPlumb.setSuspendDrawing(!0);var e=[],n=[];t.flowChartData.nodes.forEach((function(o,i){t.addNode(new f(o)),o.connect_target&&n.push({source:o.id+"-endpoint",target:o.connect_target});var s=o.messages.filter((function(t){return"card"===t.type}));s.length>0&&s.forEach((function(t){t.options&&t.options.length>0&&t.options.forEach((function(t){e.push({optionId:t.id+"-endpoint",endpoint:"Blank",isSource:!0,anchor:"Right",maxConnections:1}),t.connect_target&&n.push({source:t.id+"-endpoint",target:t.connect_target})}))}))})),t.$nextTick((function(){e.forEach((function(e){t.jsPlumb.makeSource(e.optionId,e)})),n.forEach((function(e){t.jsPlumb.connect(e)})),t.jsPlumb.setSuspendDrawing(!1,!0)})),t.jsPlumb.bind("beforeDrop",t.beforeDrop),t.jsPlumb.bind("connection",t.connectionHandler),t.jsPlumb.bind("connectionDetached",t.connectionDetached),t.jsPlumb.bind("click",t.clickConnection)}))},dropNode:function(t,e){var n=t.originalEvent.clientX,o=t.originalEvent.clientY,i=this.$refs.nodeContainer,s=i.getBoundingClientRect(),a=n,r=o;if(a<s.x||a>s.width+s.x||r<s.y||s.y>s.y+s.height)this.$message.error("請把節點拖入到畫布中");else{a=(a-s.x+i.scrollLeft)/this.zoom,r=(r-s.y+i.scrollTop)/this.zoom;var d=new f({name:"子節點",left:(a-=85)+"px",top:(r-=16)+"px"});this.addNode(d)}},addNode:function(t){var e=this;this.$store.commit("flowChart/PUSH_NODE_LIST",t),this.$nextTick((function(){e.jsPlumb.makeTarget(t.id,{endpoint:"Blank",paintStyle:{fill:"#aed8f3"},anchor:[0,0,-1,0,-2,20]}),e.jsPlumb.draggable(t.id,{filter:".block > div",containment:"parent",hoverClass:"CustomHoverClass"}),e.jsPlumb.makeSource("".concat(t.id,"-endpoint"),{endpoint:"Blank",isSource:!0,anchor:"Right",maxConnections:1})}))},setHover:function(t){var e=function t(e,n){return""!==e.id?e.id:0===n?"":t(e.parentElement,n-1)}(t.target,5);e&&this.$store.dispatch("flowChart/setTooltip",e)},changeNodeSite:function(t){var e=t.nodeId,n=t.left,o=t.top;this.$store.commit("flowChart/CHANGE_NODE_SITE",{nodeId:e,left:n,top:o})},deleteNode:function(t,e){this.jsPlumb.remove(e.id),this.$store.commit("flowChart/SPLICE_NODE_LIST",t),this.$store.dispatch("flowChart/repaintEverything")},setZoom:function(t){this.zoom=this.zoom*t;for(var e=this.jsPlumb,n=e.getContainer(),o=["webkit","moz","ms","o"],i="scale("+this.zoom+")",s="top left",a=0;a<o.length;a++)n.style[o[a]+"Transform"]=i,n.style[o[a]+"TransformOrigin"]=s;n.style.transform=i,n.style.transformOrigin=s,e.setZoom(this.zoom)},beforeDrop:function(t){var e=t.connection.source.dataset,n=t.connection.target.dataset;return e.nodeId!==n.nodeId||(this.$message.error("端節點不能連線到自己的節點"),!1)},connectionHandler:function(t){var e=t.source.dataset,n=t.target.dataset;switch(e.type){case"nodePoint":this.nodeList[e.nodeIndex].connect_target=n.nodeId;break;case"cardOption":this.nodeList[e.nodeIndex].messages[e.messageIndex].options[e.optionIndex].connect_target=n.nodeId}},connectionDetached:function(t){var e=t.source.dataset;switch(e.type){case"nodePoint":this.nodeList[e.nodeIndex].connect_target=null;break;case"cardOption":this.nodeList[e.nodeIndex].messages[e.messageIndex].options[e.optionIndex].connect_target=null}},clickConnection:function(t){var e=this;this.$confirm("是否刪除該連線","提示",{confirmButtonText:"確認",cancelButtonText:"取消",type:"warning"}).then((function(){e.jsPlumb.deleteConnectionsForElement(t.sourceId)})).catch((function(){}))}}},C=(n("0d3e"),Object(d.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"flow-container"},[n("el-container",{staticClass:"flow-chart-body"},[n("el-header",{staticClass:"flow-chart-body-header"},[n("NodeMenu",{ref:"nodeMenu",on:{dropNode:t.dropNode}})],1),t._v(" "),n("el-main",{staticClass:"flow-chart-body-content"},[n("div",{staticClass:"entire-chart"},[n("div",{ref:"nodeContainer",attrs:{id:"nodeContainer"}},[t._l(t.nodeList,(function(e,o){return[n("FlowNode",{key:e.id,attrs:{id:e.id,node:e,"node-index":o,"flow-chart-data":t.flowChartData},on:{changeNodeSite:t.changeNodeSite,deleteNode:function(n){return t.deleteNode(o,e)},selectOtherFlow:function(n){return t.selectOtherFlow(e)}}})]}))],2)])]),t._v(" "),n("div",{staticClass:"flow-chart-toolbar"},[n("div",{staticClass:"flow-chart-toolbar__item",on:{click:function(e){return t.setZoom(1.25)}}},[n("i",{staticClass:"el-icon-plus"})]),t._v(" "),n("div",{staticClass:"flow-chart-toolbar__item",on:{click:function(e){return t.setZoom(.75)}}},[n("i",{staticClass:"el-icon-minus"})])])],1)],1)}),[],!1,null,"0f573404",null));e.default=C.exports}}]);